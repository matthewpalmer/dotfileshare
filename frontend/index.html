<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="basil.css">

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
<script src='scraper.js'></script>
<script src='mustache.js'></script>

<title>Dotfiles - Share Your Dotfiles</title>
<script type="text/javascript">
  var analytics=analytics||[];(function(){var e=["identify","track","trackLink","trackForm","trackClick","trackSubmit","page","pageview","ab","alias","ready","group"],t=function(e){return function(){analytics.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var n=0;n<e.length;n++)analytics[e[n]]=t(e[n])})(),analytics.load=function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"===document.location.protocol?"https://":"http://")+"d2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/"+e+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)};
  analytics.load("5dbb1l2vii");
</script>
</head>

<body>
<div class = 'container basil'>
  <a href="/" class='headLink'>
  <div class = 'header'>
    <h1>Dotfiles</h1>
    <p class = 'hUnderling'>Share Your Dotfiles</p>
    <div class = 'upload'>
    <a href='/upload'>
      Upload
    </a>
  </div>
  </div>
  </a>
  
  <div id = 'mostPopular'>

  </div>
  <div class = 'footer'>
    <small>Created by @_matthewpalmer.</small>
  </div>
</div>



<script>
analytics.track('Index loaded', {

});
//url, method, callback
scrape('/files/popular', 'GET', function(e) {
  var arrayOfFiles = JSON.parse(e);
  var arrayForDisplay = [];
  for (var i in arrayOfFiles) {
    arrayForDisplay.push(arrayOfFiles[i]);
    console.log(arrayForDisplay);
  }
  var files = {
    contents: arrayForDisplay
  }
  var out = Mustache.render("<ol>{{#contents}}<li><h2><a href='/f/{{_id}}'>{{title}}</a></h2><h5 class='authorStar'>{{author}} - {{stars}} stars</h5></li>{{/contents}}</ol>", files);
  //console.log(out);
  document.getElementById('mostPopular').innerHTML = out;
});
</script>
</body>

</html>
